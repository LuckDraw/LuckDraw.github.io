!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).LuckyCanvas={})}(this,(function(t){"use strict";class e{constructor(){this.htmlFontSize=16,this.dpr=1,this.setDpr(),this.setHTMLFontSize()}setDpr(){window.dpr=this.dpr=1.3*(window.devicePixelRatio||2)}setHTMLFontSize(){this.htmlFontSize=+getComputedStyle(document.documentElement).fontSize.slice(0,-2)}optimizeClarity(t,e,i){const{dpr:s}=this,h=t=>(t*s-t)/(t*s)*(s/2)*100;t.style.transform=`scale(${1/s}) translate(\n      ${-h(e)}%, ${-h(i)}%\n    )`}changeUnits(t,{denominator:e=1,clean:i=!1}){return Number(t.replace(/^(\-*[0-9.]*)([a-z%]*)$/,((t,s,h)=>{switch(h){case"%":s*=e/100;break;case"px":s*=1;break;case"rem":s*=this.htmlFontSize;break;default:s*=1}return i||"%"===h?s:s*this.dpr})))}observer(t){if("object"!=typeof t||null===t)return t;Object.keys(t).forEach((e=>{this.defineReactive(t,e,t[e])}))}defineReactive(t,e,i){this.observer(i),Object.defineProperty(t,e,{get:()=>(console.log("get",e),i),set(t){console.log("set",e,i),t!==i&&(i=t,this.observer(i))}})}}const i=(t,...e)=>e.some((e=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===e)),s=t=>[].filter.call(t,(t=>"\n"!==t)).join(""),h=t=>Math.PI/180*t,n=(t,e)=>[+(Math.cos(t)*e).toFixed(8),+(Math.sin(t)*e).toFixed(8)],r=(t,e)=>{let i=-t/e;return[i,-i*t+e]},o=(t,e,i,s,a=!0)=>{if(Math.abs(s-i).toFixed(8)>=h(180).toFixed(8)){let h=(s+i)/2;return a?(o(t,e,i,h,a),o(t,e,h,s,a)):(o(t,e,h,s,a),o(t,e,i,h,a)),!1}a||([i,s]=[s,i]);const[l,d]=n(i,e),[c,g]=n(s,e),[f,u]=r(l,d),[m,p]=r(c,g);let b=(p-u)/(f-m),w=(m*u-f*p)/(m-f);isNaN(b)&&(Math.abs(l)===+e.toFixed(8)&&(b=l),Math.abs(c)===+e.toFixed(8)&&(b=c)),f===1/0||f===-1/0?w=m*b+p:m!==1/0&&m!==-1/0||(w=f*b+u),t.lineTo(l,d),t.arcTo(b,w,c,g,e)},a=(t,e,i,s,h,n,r)=>{let o=Math.min(s,h);n>o/2&&(n=o/2),t.beginPath(),t.fillStyle=r,t.moveTo(e+n,i),t.lineTo(e+n,i),t.lineTo(e+s-n,i),t.arcTo(e+s,i,e+s,i+n,n),t.lineTo(e+s,i+h-n),t.arcTo(e+s,i+h,e+s-n,i+h,n),t.lineTo(e+n,i+h),t.arcTo(e,i+h,e,i+h-n,n),t.lineTo(e,i+n),t.arcTo(e,i,e+n,i,n),t.closePath(),t.fill()},l=function(t,e,i,s){return t>=s&&(t=s),i*(t/=s)*t+e},d=function(t,e,i,s){return t>=s&&(t=s),-i*(t/=s)*(t-2)+e};t.LuckyGrid=class extends e{constructor(t,e={}){super(),this.rows=3,this.cols=3,this.blocks=[],this.prizes=[],this.defaultConfig={gutter:5,speed:20,accelerationTime:2500,decelerationTime:2500},this.defaultStyle={borderRadius:20,fontColor:"#000",fontSize:"18px",fontStyle:"microsoft yahei ui,microsoft yahei,simsun,sans-serif",fontWeight:"400",background:"#fff",shadow:"",wordWrap:!0,lengthLimit:"90%"},this.activeStyle={background:"#ffce98",shadow:""},this.boxWidth=0,this.boxHeight=0,this.cellWidth=0,this.cellHeight=0,this.startTime=0,this.endTime=0,this.currIndex=0,this.stopIndex=0,this.endIndex=0,this.demo=!1,this.timer=0,this.animationId=0,this.FPS=16.6,this.cells=[],this.cellImgs=[],this.blockData=[],this.box=document.querySelector(t),this.canvas=document.createElement("canvas"),this.box.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setData(e);let i=[[]];this.prizes&&(i=this.prizes.map((t=>t.imgs))),this.button&&(i[this.cols*this.rows-1]=this.button.imgs),this.init(i)}setData(t){this.rows=Number(t.rows)||3,this.cols=Number(t.cols)||3,this.blocks=t.blocks||[],this.prizes=t.prizes||[],this.button=t.button,this.startCallback=t.start,this.endCallback=t.end;const e=this.defaultConfig,i=this.defaultStyle,s=this.activeStyle;for(let i in t.defaultConfig)e[i]=t.defaultConfig[i];e.gutter=this.getLength(e.gutter)*this.dpr,e.speed/=40;for(let e in t.defaultStyle)i[e]=t.defaultStyle[e];i.borderRadius=this.getLength(i.borderRadius)*this.dpr;for(let e in t.activeStyle)s[e]=t.activeStyle[e]}init(t){this.setDpr(),this.setHTMLFontSize();const{box:e,canvas:s,dpr:h,defaultStyle:n,defaultConfig:r}=this;if(!e)return;this.boxWidth=s.width=e.offsetWidth*h,this.boxHeight=s.height=e.offsetHeight*h,this.optimizeClarity(s,this.boxWidth,this.boxHeight),this.cells=[...this.prizes],this.button&&(this.cells[this.cols*this.rows-1]={...this.button}),this.cells.forEach((t=>{t.col=t.col||1,t.row=t.row||1})),this.blockData=[],this.prizeArea=this.blocks.reduce((({x:t,y:e,w:s,h:n},r)=>{const[o,a,l,d]=(t=>{let e=t.padding.replace(/px/g,"").split(" ").map((t=>~~t))||[0],s=0,h=0,n=0,r=0;switch(e.length){case 1:s=h=n=r=e[0];break;case 2:s=h=e[0],n=r=e[1];break;case 3:s=e[0],n=r=e[1],h=e[2];break;default:s=e[0],h=e[1],n=e[2],r=e[3]}const o={paddingTop:s,paddingBottom:h,paddingLeft:n,paddingRight:r};for(let e in o)o[e]=t.hasOwnProperty(e)&&i(t[e],"string","number")?~~String(t[e]).replace(/px/g,""):o[e];return[s,h,n,r]})(r).map((t=>t*h));return this.blockData.push([t,e,s,n,r.borderRadius?this.getLength(r.borderRadius)*h:0,r.background]),{x:t+l,y:e+o,w:s-l-d,h:n-o-a}}),{x:0,y:0,w:this.boxWidth,h:this.boxHeight}),this.cellWidth=(this.prizeArea.w-r.gutter*(this.cols-1))/this.cols,this.cellHeight=(this.prizeArea.h-r.gutter*(this.rows-1))/this.rows;const o=()=>{this.draw(),this.demo&&this.walk(),this.button&&(s.onclick=t=>{const[e,i,s,h]=this.getGeometricProperty([this.button.x,this.button.y,this.button.col||1,this.button.row||1]);if(t.offsetX<e||t.offsetY<i||t.offsetX>e+s||t.offsetY>i+h)return!1;this.startTime||this.startCallback?.(t)})};let a=0,l=0;i(t,"array")&&(this.draw(),t.forEach(((t,e)=>{if(!t)return!1;t.forEach(((t,i)=>{l++,this.loadAndCacheImg(e,i,(()=>{a++,l===a&&o.call(this)}))}))}))),l||o.call(this)}loadAndCacheImg(t,e,i){const s=this.cells[t];if(!s||!s.imgs)return;const h=s.imgs[e];this.cellImgs[t]||(this.cellImgs[t]=[]);let n=new Image;this.cellImgs[t][e]={defaultImg:n},n.src=h.src;let r=0,o=1;if(n.onload=()=>{r++,r===o&&i.call(this)},!h.hasOwnProperty("activeSrc"))return;o++;let a=new Image;this.cellImgs[t][e].activeImg=a,a.src=h.activeSrc,a.onload=()=>{r++,r===o&&i.call(this)}}computedWidthAndHeight(t,e,i){if(!e.width&&!e.height)return[t.width,t.height];if(e.width&&!e.height){let s=this.getWidth(e.width,i.col);return[s,t.height*(s/t.width)]}if(!e.width&&e.height){let s=this.getHeight(e.height,i.row);return[t.width*(s/t.height),s]}return[this.getWidth(e.width,i.col),this.getHeight(e.height,i.row)]}draw(){const{ctx:t,dpr:e,defaultStyle:i,activeStyle:h}=this;t.clearRect(0,0,this.boxWidth,this.boxWidth),this.blockData.forEach((([e,i,s,h,n,r])=>{a(t,e,i,s,h,n,this.handleBackground(e,i,s,h,r))})),this.cells.forEach(((n,r)=>{let[o,l,d,c]=this.getGeometricProperty([n.x,n.y,n.col,n.row]);const g=r===this.currIndex%this.prizes.length>>0,f=(g?h.shadow:n.shadow||i.shadow).replace(/px/g,"").split(",")[0].split(" ").map(((t,i)=>i<3?Number(t)*e:t));4===f.length&&(t.shadowColor=f[3],t.shadowOffsetX=f[0],t.shadowOffsetY=f[1],t.shadowBlur=f[2],f[0]>0?d-=f[0]:(d+=f[0],o-=f[0]),f[1]>0?c-=f[1]:(c+=f[1],l-=f[1])),a(t,o,l,d,c,n.borderRadius?this.getLength(n.borderRadius)*e:this.getLength(i.borderRadius),this.handleBackground(o,l,d,c,n.background,g)),t.shadowColor="rgba(255, 255, 255, 0)",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,n.imgs&&n.imgs.forEach(((e,i)=>{if(!this.cellImgs[r])return!1;const s=this.cellImgs[r][i];if(!s)return!1;const h=g&&s.activeImg||s.defaultImg,[a,d]=this.computedWidthAndHeight(h,e,n);t.drawImage(h,o+this.getOffsetX(a,n.col),l+this.getHeight(e.top,n.row),a,d)})),n.fonts&&n.fonts.forEach((r=>{let a=g&&h.fontStyle?h.fontStyle:r.fontStyle||i.fontStyle,d=g&&h.fontWeight?h.fontWeight:r.fontWeight||i.fontWeight,c=g&&h.fontSize?this.getLength(h.fontSize):this.getLength(r.fontSize||i.fontSize);const f=g&&h.lineHeight?h.lineHeight:r.lineHeight||i.lineHeight||r.fontSize||i.fontSize;t.font=`${d} ${c*e}px ${a}`,t.fillStyle=g&&h.fontColor?h.fontColor:r.fontColor||i.fontColor;let u=[],m=String(r.text);if(r.hasOwnProperty("wordWrap")?r.wordWrap:i.wordWrap){m=s(m);let e="";for(let s=0;s<m.length;s++){e+=m[s],t.measureText(e).width>this.getWidth(r.lengthLimit||i.lengthLimit,n.col)&&(u.push(e.slice(0,-1)),e=m[s])}e&&u.push(e),u.length||u.push(m)}else u=m.split("\n");u.forEach(((i,s)=>{t.fillText(i,o+this.getOffsetX(t.measureText(i).width,n.col),l+this.getHeight(r.top,n.row)+(s+1)*this.getLength(f)*e)}))}))}))}handleBackground(t,e,i,s,h,n=!1){const{ctx:r,defaultStyle:o,activeStyle:a}=this;return(h=n?a.background:h||o.background).includes("linear-gradient")&&(h=((t,e,i,s,h,n)=>{const r=/linear-gradient\((.+)\)/.exec(n)[1].split(",").map((t=>t.trim()));let o=r.shift(),a=[0,0,0,0];if(o.includes("deg")){o=o.slice(0,-3)%360;const t=t=>Math.tan(t/180*Math.PI);o>=0&&o<45?a=[e,i+h,e+s,i+h-s*t(o-0)]:o>=45&&o<90?a=[e,i+h,e+s-h*t(o-45),i]:o>=90&&o<135?a=[e+s,i+h,e+s-h*t(o-90),i]:o>=135&&o<180?a=[e+s,i+h,e,i+s*t(o-135)]:o>=180&&o<225?a=[e+s,i,e,i+s*t(o-180)]:o>=225&&o<270?a=[e+s,i,e+h*t(o-225),i+h]:o>=270&&o<315?a=[e,i,e+h*t(o-270),i+h]:o>=315&&o<360&&(a=[e,i,e+s,i+h-s*t(o-315)])}else o.includes("top")?a=[e,i+h,e,i]:o.includes("bottom")?a=[e,i,e,i+h]:o.includes("left")?a=[e+s,i,e,i]:o.includes("right")&&(a=[e,i,e+s,i]);const l=t.createLinearGradient(...a.map((t=>t>>0)));return r.reduce(((t,e,i)=>{const s=e.split(" ");return 1===s.length?t.addColorStop(i,s[0]):2===s.length&&t.addColorStop(...s),t}),l)})(r,t,e,i,s,h)),h}play(){this.startTime||(clearInterval(this.timer),cancelAnimationFrame(this.animationId),this.startTime=Date.now(),this.prizeFlag=void 0,this.run())}stop(t){this.prizeFlag=t%this.prizes.length}run(t=0){const{currIndex:e,prizes:i,prizeFlag:s,startTime:h,defaultConfig:n}=this;let r=Date.now()-h;if(r>=n.accelerationTime&&void 0!==s)return this.FPS=r/t,this.endTime=Date.now(),this.stopIndex=e,this.endIndex=5*i.length+s-(e>>0),cancelAnimationFrame(this.animationId),this.slowDown();this.currIndex=(e+l(r,.1,n.speed,n.accelerationTime))%i.length,this.draw(),this.animationId=window.requestAnimationFrame(this.run.bind(this,t+1))}slowDown(){const{prizes:t,prizeFlag:e,stopIndex:i,endIndex:s,defaultConfig:h}=this;let n=Date.now()-this.endTime;if(n>h.decelerationTime)return this.startTime=0,this.endCallback?.({...t.find(((t,i)=>i===e))}),cancelAnimationFrame(this.animationId);this.currIndex=d(n,i,s,h.decelerationTime)%t.length,this.draw(),this.animationId=window.requestAnimationFrame(this.slowDown.bind(this))}walk(){clearInterval(this.timer),this.timer=window.setInterval((()=>{this.currIndex+=1,this.draw()}),1300)}getGeometricProperty([t,e,i,s]){const{defaultConfig:h,cellWidth:n,cellHeight:r}=this;let o=[this.prizeArea.x+(n+h.gutter)*t,this.prizeArea.y+(r+h.gutter)*e];return i&&s&&o.push(n*i+h.gutter*(i-1),r*s+h.gutter*(s-1)),o}getLength(t){return i(t,"number")?t:i(t,"string")?this.changeUnits(t,{clean:!0}):0}getWidth(t,e=1){return i(t,"number")?t*this.dpr:i(t,"string")?this.changeUnits(t,{denominator:this.cellWidth*e+this.defaultConfig.gutter*(e-1)}):0}getHeight(t,e=1){return i(t,"number")?t*this.dpr:i(t,"string")?this.changeUnits(t,{denominator:this.cellHeight*e+this.defaultConfig.gutter*(e-1)}):0}getOffsetX(t,e=1){return(this.cellWidth*e+this.defaultConfig.gutter*(e-1)-t)/2}},t.LuckyWheel=class extends e{constructor(t,e={}){super(),this.blocks=[],this.prizes=[],this.buttons=[],this.defaultConfig={gutter:"0px",offsetDegree:0,speed:20,accelerationTime:2500,decelerationTime:2500},this.defaultStyle={fontSize:"18px",fontColor:"#000",fontStyle:"microsoft yahei ui,microsoft yahei,simsun,sans-serif",fontWeight:"400",background:"#fff",wordWrap:!0,lengthLimit:"90%"},this.Radius=0,this.prizeRadius=0,this.prizeDeg=0,this.prizeRadian=0,this.rotateDeg=0,this.maxBtnRadius=0,this.startTime=0,this.endTime=0,this.stopDeg=0,this.endDeg=0,this.animationId=0,this.FPS=16.6,this.prizeImgs=[[]],this.btnImgs=[[]],this.box=document.querySelector(t),this.canvas=document.createElement("canvas"),this.box.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.setData(e);let i=[[]];this.prizes&&(i=this.prizes.map((t=>t.imgs))),this.buttons&&i.push(...this.buttons.map((t=>t.imgs))),this.init(i)}setData(t){this.blocks=t.blocks||[],this.prizes=t.prizes||[],this.buttons=t.buttons||[],this.startCallback=t.start,this.endCallback=t.end;for(let e in t.defaultConfig)this.defaultConfig[e]=t.defaultConfig[e];for(let e in t.defaultStyle)this.defaultStyle[e]=t.defaultStyle[e]}init(t){this.setDpr(),this.setHTMLFontSize();const{box:e,canvas:s,ctx:h,dpr:n}=this;if(!e)return;s.width=s.height=e.offsetWidth*n,this.Radius=s.width/2,this.optimizeClarity(s,2*this.Radius,2*this.Radius),h.translate(this.Radius,this.Radius);const r=()=>{this.draw(),s.onclick=t=>{h.beginPath(),h.arc(0,0,this.maxBtnRadius,0,2*Math.PI,!1),h.isPointInPath(t.offsetX,t.offsetY)&&(this.startTime||this.startCallback?.(t))}};let o=0,a=0;i(t,"array")&&(this.draw(),t.forEach(((t,e)=>{if(!t)return!1;t.forEach(((t,i)=>{a++,this.loadAndCacheImg(e,i,(()=>{o++,a===o&&r.call(this)}))}))}))),a||r.call(this)}loadAndCacheImg(t,e,i){const s=t<this.prizes.length,h=s?"prizes":"buttons",n=s?"prizeImgs":"btnImgs";t=s?t:t-this.prizes.length;const r=this[h][t];if(!r||!r.imgs)return;const o=r.imgs[e];if(!o)return;let a=new Image;this[n][t]||(this[n][t]=[]),this[n][t][e]=a,a.src=o.src,a.onload=()=>i.call(this)}computedWidthAndHeight(t,e,i,s){if(!e.width&&!e.height)return[t.width,t.height];if(e.width&&!e.height){let s=this.getWidth(e.width,i);return[s,t.height*(s/t.width)]}if(!e.width&&e.height){let i=this.getHeight(e.height,s);return[t.width*(i/t.height),i]}return[this.getWidth(e.width,i),this.getHeight(e.height,s)]}draw(){const{ctx:t,dpr:e,defaultConfig:i,defaultStyle:r}=this;t.clearRect(-this.Radius,-this.Radius,2*this.Radius,2*this.Radius),this.prizeRadius=this.blocks.reduce(((i,s)=>(t.beginPath(),t.fillStyle=s.background,t.arc(0,0,i,0,2*Math.PI,!1),t.fill(),i-this.getLength(s.padding.split(" ")[0])*e)),this.Radius),this.prizeDeg=360/this.prizes.length,this.prizeRadian=h(this.prizeDeg);let a=h(-90+this.rotateDeg+i.offsetDegree);const l=e=>this.getOffsetX(t.measureText(e).width),d=(t,i,s)=>{const h=t.lineHeight||r.lineHeight||t.fontSize||r.fontSize;return this.getHeight(t.top,i)+(s+1)*this.getLength(h)*e};t.save(),this.prizes.forEach(((c,g)=>{let f=a+g*this.prizeRadian,u=this.prizeRadius-this.maxBtnRadius;((t,e,i,s,r,a,l)=>{e||(e=a);let d=h(90/Math.PI/i*a),c=h(90/Math.PI/e*a),g=s+d,f=r-d,u=s+c,m=r-c;t.beginPath(),t.fillStyle=l,t.moveTo(...n(g,i)),o(t,i,g,f,!0),m>u?o(t,e,u,m,!1):t.lineTo(...n((s+r)/2,a/2/Math.abs(Math.sin((s-r)/2)))),t.closePath(),t.fill()})(t,this.maxBtnRadius,this.prizeRadius,f-this.prizeRadian/2,f+this.prizeRadian/2,this.getLength(i.gutter)*e,c.background||r.background||"rgba(0, 0, 0, 0)");let m=Math.cos(f)*this.prizeRadius,p=Math.sin(f)*this.prizeRadius;t.translate(m,p),t.rotate(f+h(90)),c.imgs&&c.imgs.forEach(((e,i)=>{if(!this.prizeImgs[g])return;const s=this.prizeImgs[g][i];if(!s)return;const[h,n]=this.computedWidthAndHeight(s,e,this.prizeRadian*this.prizeRadius,u);t.drawImage(s,this.getOffsetX(h),this.getHeight(e.top,u),h,n)})),c.fonts&&c.fonts.forEach((h=>{let n=h.fontColor||r.fontColor,o=h.fontWeight||r.fontWeight,a=this.getLength(h.fontSize||r.fontSize),c=h.fontStyle||r.fontStyle;t.fillStyle=n,t.font=`${o} ${a*e}px ${c}`;let g=[],f=String(h.text);if(h.hasOwnProperty("wordWrap")?h.wordWrap:r.wordWrap){f=s(f);let n="";for(let s=0;s<f.length;s++){n+=f[s];let o=t.measureText(n).width,a=(this.prizeRadius-d(h,u,g.length))*Math.tan(this.prizeRadian/2)*2-this.getLength(i.gutter)*e;o>this.getWidth(h.lengthLimit||r.lengthLimit,a)&&(g.push(n.slice(0,-1)),n=f[s])}n&&g.push(n),g.length||g.push(f)}else g=f.split("\n");g.filter((t=>!!t)).forEach(((e,i)=>{t.fillText(e,l(e),d(h,u,i))}))})),t.rotate(h(360)-f-h(90)),t.translate(-m,-p)})),t.restore(),this.buttons.forEach(((i,s)=>{let h=this.getHeight(i.radius);this.maxBtnRadius=Math.max(this.maxBtnRadius,h),t.beginPath(),t.fillStyle=i.background||"rgba(0, 0, 0, 0)",t.arc(0,0,h,0,2*Math.PI,!1),t.fill(),i.pointer&&(t.beginPath(),t.fillStyle=i.background||"rgba(0, 0, 0, 0)",t.moveTo(-h,0),t.lineTo(h,0),t.lineTo(0,2*-h),t.closePath(),t.fill()),i.imgs&&i.imgs.forEach(((e,n)=>{if(!this.btnImgs[s])return;const r=this.btnImgs[s][n];if(!r)return;const[o,a]=this.computedWidthAndHeight(r,e,2*this.getHeight(i.radius),2*this.getHeight(i.radius));t.drawImage(r,this.getOffsetX(o),this.getHeight(e.top,h),o,a)})),i.fonts&&i.fonts.forEach((i=>{let s=i.fontColor||r.fontColor,n=i.fontWeight||r.fontWeight,o=this.getLength(i.fontSize||r.fontSize),a=i.fontStyle||r.fontStyle;t.fillStyle=s,t.font=`${n} ${o*e}px ${a}`,String(i.text).split("\n").forEach(((e,s)=>{t.fillText(e,l(e),d(i,h,s))}))}))}))}play(){this.startTime||(cancelAnimationFrame(this.animationId),this.startTime=Date.now(),this.prizeFlag=void 0,this.run())}stop(t){this.prizeFlag=Number(t)%this.prizes.length}run(t=0){const{prizeFlag:e,prizeDeg:i,rotateDeg:s,defaultConfig:h}=this;let n=Date.now()-this.startTime;if(n>=h.accelerationTime&&void 0!==e)return this.FPS=n/t,this.endTime=Date.now(),this.stopDeg=s,this.endDeg=1800-e*i-s-h.offsetDegree,cancelAnimationFrame(this.animationId),this.slowDown();this.rotateDeg=(s+l(n,0,h.speed,h.accelerationTime))%360,this.draw(),this.animationId=window.requestAnimationFrame(this.run.bind(this,t+1))}slowDown(){const{prizes:t,prizeFlag:e,stopDeg:i,endDeg:s,defaultConfig:h}=this;let n=Date.now()-this.endTime;if(n>=h.decelerationTime)return this.startTime=0,this.endCallback?.({...t.find(((t,i)=>i===e))}),cancelAnimationFrame(this.animationId);this.rotateDeg=d(n,i,s,h.decelerationTime)%360,this.draw(),this.animationId=window.requestAnimationFrame(this.slowDown.bind(this))}getLength(t){return i(t,"number")?t:i(t,"string")?this.changeUnits(t,{clean:!0}):0}getWidth(t,e=this.prizeRadian*this.prizeRadius){return i(t,"number")?t*this.dpr:i(t,"string")?this.changeUnits(t,{denominator:e}):0}getHeight(t,e=this.prizeRadius){return i(t,"number")?t*this.dpr:i(t,"string")?this.changeUnits(t,{denominator:e}):0}getOffsetX(t){return-t/2}},Object.defineProperty(t,"__esModule",{value:!0})}));
